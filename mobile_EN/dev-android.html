<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Recommandations accessibilité Orange pour mobiles</title>
        
      
    <!-- Boosted -->
      <!-- To use the old orange brand, just remove the 2015 postfix-->      
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
        <link rel="stylesheet" href="../boosted/css/bootstrap-orangeIE82015.css" />
        <link rel="stylesheet" href="../bossted/css/bootstrap-orange-themeIE82015.css" />
        <link rel="stylesheet" href="../bossted/css/boostedIE82015.css">
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
      <!--[if (gte IE 9) | (!IE)]><!-->                   
        <link rel="stylesheet" href="../boosted/css/bootstrap-orange2015.css" />
        <link rel="stylesheet" href="../boosted/css/bootstrap-orange-theme2015.css" />
        <link rel="stylesheet" href="../boosted/css/boosted2015.css">              
    <!--<![endif]-->
                  
      <!-- Style pour la mise en forme des exemples de code -->      
      <link rel="stylesheet" href="css/dark.css">
      
      <!-- Styles perso -->
      <link rel="stylesheet" href="css/reco.css">  
      <link rel="stylesheet" href="css/reco-custom.css">        
      
      <script type="text/javascript" src="./js/lunr.min.js"></script>
      <script src="./js/jquery.min.js"></script>    
      <script src="./js/jquery.validate.min.js"></script>
</head>
<body>
    <div class="skip-links sr-only">
        <a id="skip-nav" href="#sidebar">Skip to navigation</a>
        <a id="skip-content" href="#content">Skip to main content</a>
    </div>
    <header role="banner">
        <nav role="navigation" class="navbar navbar-default navbar-fixed-top" id="top-navbar">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Navigation bar</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a href="index.html" class="navbar-brand">
                <img src="../boosted/images/ORANGE_LOGO_rgb.jpg" alt="Back to home" title="Back to home" width="48"/>                
              </a>
            </div>
            
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                
              <ul class="nav navbar-nav top-nav">
                    <li><a href="../home_EN/index.html">Home</a></li>
                    <li><a href="../web_EN/index.html">Web</a></li>                   
                    <li class="active"><a href="../mobile_EN/index.html">Mobile</a></li>
                    <li><a class="language" href="../mobile/index.html" lang="fr" title="French version">Version française</a></li>                    
              </ul>
                                                                                                      
              <form action="./search.html" class="navbar-form navbar-right" role="search">              
              
              <!-- formulaire de recherche -->
                <div class="form-group">
                  <input title="Search" type="text" class="form-control" placeholder="Search..." name="q">
                </div>
                <button title="Search" type="submit" class="btn btn-default">
                  <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                  <span class="sr-only">Search</span>
                </button>
                
              <!-- bouton CDU -->
              <span id="cdu">
                <a href="#" title="Confort plus" id="uci_link">
                    Confort
                    <span>+</span>
                </a>                  
              </span>
                              
              </form>    
                                                         
              <ul id="navigation-mobile" class="nav navbar-nav"></ul>
                                                  
            </div>
          </div>
        </nav>
    </header>
    
    <main role="main" class="container-fluid">
       
      <div class="row ">
        <div role="navigation" id="sidebar" class="hidden-xs col-sm-3 sidebar-offcanvas">
            <ul id="navigation" class="nav navbar-nav">                
                <li><a id="index" href="index.html">Presentation</a></li>
                <li><a id="criteria-mobile" href="criteria-mobile.html">Mobile criteria</a></li>  
                <li><a id="dev-mobile" href="dev-mobile.html">Guide for developers</a></li>                
                <li><a id="mdan" href="mdan.html">mDAN</a></li>                                                                        
                <li><a id="screen-reader" href="screen-reader.html">Screen reader</a></li>
                <li><a id="links" href="links.html">Useful links</a></li>
                <li><a id="contact" href="contact.html">Contact</a></li>
                <li><a id="about" href="about.html">About</a></li>
            </ul>
        </div>
    
        <div class="col-xs-12 col-sm-9" id="content">
          <span class="sr-only">You are here: </span>
          <ol class="breadcrumb">
            <li><a href="/mobile_EN/index.html">Mobile</a></li>        
          </ol>
        
          <h1 id="android-developer-guide">Android developer guide</h1>
<script>$(document).ready(function () {

    setBreadcrumb([{"label":"Guide for developers", "url": "./dev-mobile.html"},
        {"label":"Android developer guide"}
    ]);
    addSubMenu();

});</script>

<p><span data-menuitem="dev-mobile"></span></p>
<p>This guide aims to present the various accessibility options available on the Android SDK. Through different categories, this guide explains how to use the accessibility attributes / methods and provides links to the official Google documentation. Code snippets are also available to show you how to implemente it.  </p>
<h2 id="text-alternative">Text alternative</h2>
<p><strong>Description: </strong>  </p>
<p>On Android, the vocalization of an element is made through an attribute, named <code>contentDescription</code>. This attribute accepting a single string parameter (and therefore localizable) completely redefines the text to be read by the accessibility service like TalkBack. This allows a component to be more explicit than the text displayed on the screen. For example, in the case of a button whose title is &quot;OK&quot;, the <code>contentDescription</code> attribute can indicate that the button is used to confirm an action.</p>
<p>The <code>contentDescription</code> attribule must also be used on custom elements to indicate their nature. For example, a clickable <code>LinearLayout</code> must have a <code>contentDescription</code> like &quot;button_name, button&quot; (it should also be accessible with the focus, see the corresponding section). </p>
<p>Note that the <code>contentDescription</code> is available in any element that inherits from <code>View</code>. It is therefore possible to set a <code>contentDescription</code> on a <code>TextView</code> for example, as shown in the &quot;accessibility guide - text alternative - abbreviations, dates and times&quot; section.</p>
<p><strong>Examples: </strong>   </p>
<p>Simple example (localized):<br><code>myTextView.setContentDescription(getString(R.string.criteria_alt_ex1_cd_txt2));</code></p>
<p>Example indicating the state and nature of a TabHost (not localized):  </p>
<pre><code>private class TabHostListener implements TabHost.OnTabChangeListener {
    [...]
    public void onTabChanged(String tabId) {setContentDescription(mTabHost, mTabsLabel);}
}

private void setContentDescription(TabHost mTabHost, String[] mTabsLabel) {
    int tab = mTabHost.getCurrentTab();
    int tabCount = mTabHost.getTabWidget().getTabCount();

    for (int tabNumber = 0; tabNumber < tabCount; tabNumber++) {
        CharSequence contentDescription = mTabsLabel[tabNumber];

        contentDescription = contentDescription + ", tab " + (tabNumber + 1) + " on " + tabCount;
        if (tabNumber == tab) {
            contentDescription = contentDescription + ", selected";
        }
        mTabHost.getTabWidget().getChildAt(tabNumber).setContentDescription(contentDescription);
    }
}</code></pre>

<p><strong>Link: </strong></p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#attr_android:contentDescription">contentDescription</a></li>
</ul>
<h2 id="hiding-elements-from-accessibility">Hiding elements from accessibility</h2>
<p><strong>Description: </strong>  </p>
<p>It is possible via an accessibility attribute to hide elements from accessibility tools (e.g. TalkBack). By extension, it is possible to force some elements to be visible to accessibility tools.
<code>ImportantForAccessibility</code>: depending on the value of the attribute, it indicates if an element is whether visible or not to the Accessibility API.</p>
<ul>
<li><code>Auto</code> (0): this is the default, it is the system that decides. For example, a <code>Button</code> will have its default value set to 1 (<i>yes</i>) and a <code>LinearLayout</code> set to 2 (<i>no</i>).</li>
<li><code>Yes</code> (1): the view is important for accessibility. For example, it can receive the TalkBack focus.</li>
<li><code>No</code> (2): the view is not important for accessibility. It does not trigger accessibility events and is therefore ignored by accessibility services such as TalkBack.</li>
<li><code>NoHideDescendants</code> (4): the view is not important for accessibility, but also his children views. This will hide all the items in a view to accessibility at once. Very useful on custom elements.</li>
</ul>
<p>Note: the &quot;<code>importantForAccessibility</code>&quot; attribute is available to any element that inherits from <code>View</code>.</p>
<p><strong>Examples: </strong></p>
<p>From xml: 
<code>android:importantForAccessibility=&quot;no&quot;</code></p>
<p>Programmatically:
<code>myView.setImportantForAccessibility(View.IMPORTANT_FOR_ACCESSIBILITY_NO_HIDE_DESCENDANTS);</code></p>
<p><strong>Link: </strong>     </p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#setImportantForAccessibility%28int%29">importantForAccessibility</a></li>
</ul>
<h2 id="trigger-a-vocalization">Trigger a vocalization</h2>
<p><strong>Description: </strong>  </p>
<p>It is very easy to trigger vocalizations with TalkBack. Triggering a vocalization is very useful for dynamic content, just like a <code>LiveRegion</code> (see corresponding section). To trigger a vocalization, just call the <code>announceForAccessibility</code> method with the id parameter of the string to vocalize.</p>
<p>Note: the <code>announceForAccessibility</code> method is available on any item that inherits from <code>View</code> and is made in the system language.</p>
<p>Warning: we are talking about TalkBack vocalization and not TTS (Text To Speech) that can operate whether TalkBack is on or off.</p>
<p><strong> Example: </strong></p>
<p>It is common to check the Android version before triggering TalkBack vocalization. This is because <code>announceForAccessibility</code> has been introduced in Jelly Bean.</p>
<pre><code>if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
    getView().announceForAccessibility(getString(R.string.criteria_contentchange_ex1_announce));
}</code></pre>

<p><strong>Link: </strong></p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#announceForAccessibility%28java.lang.CharSequence%29">announceForAccessibility</a></li>
</ul>
<h2 id="check-if-talkback-is-on">Check if Talkback is on</h2>
<p><strong>Description: </strong> </p>
<p>On Android, it is possible to know whether the Accessibility API is enabled, thus whether TalkBack is enabled.</p>
<p><strong>Usage: </strong> </p>
<pre><code>AccessibilityManager am = (AccessibilityManager) context.getSystemService(ACCESSIBILITY_SERVICE);  
boolean isAccessibilityEnabled = am.isEnabled();</code></pre>


<h2 id="live-region-dynamic-content-">Live region (dynamic content)</h2>
<p><strong>Description  </strong></p>
<p>You can specify to a view that it is an &quot;live&quot; region, it means that its content is subject to change dynamically and should in this case notify the Accessibility API. This will generate TalkBack vocalizations. A typical use case: on a form, if the user makes a mistake and an error message appears, the view containing the error message must be defined as a &quot;live&quot; region.</p>
<p>We must use the <code>setAccessibilityLiveRegion</code> method that takes a mode parameter for the live region. There are 3 modes:</p>
<ul>
<li><code>ACCESSIBILITY_LIVE_REGION_NONE</code>: this view is not a live region. This is the default for most views.</li>
<li><code>ACCESSIBILITY_LIVE_REGION_POLITE</code>: when a change occurs, vocalizations are triggered on the changes. These vocalizations are &quot;polite&quot;; they have lower priority than system vocalizations for example.</li>
<li><code>ACCESSIBILITY_LIVE_REGION_ASSERTIVE</code>: when a change occurs, vocalizations are triggered on the changes. These vocalizations are &quot;assertive&quot;; they have the highest priority and are immediately vocalized. </li>
</ul>
<p>Note the <code>setAccessibilityLiveRegion</code> method is available on any class that inherits from <code>View</code>.</p>
<p><strong>Examples: </strong></p>
<pre><code>&lt;TextView
   [...]
   android:accessibilityLiveRegion="polite" /&gt;</code></pre>

<p><strong>Link: </strong></p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#setAccessibilityLiveRegion%28int%29">setAccessibilityLiveRegion</a></li>
</ul>
<h2 id="reading-order-talkback-">Reading order (TalkBack)</h2>
<p><strong>Description: </strong>  </p>
<p>By default, the reading order of voice synthesis depends on: the &#39;logical&#39; reading (in France), from left to right and top to bottom, and xml reading (order of elements declaration). It is quite possible to redefine the reading order with two attributes:  </p>
<ul>
<li><code>AccessibilityTraversalAfter</code>: sets the id of a view after which this one is visited in accessibility traversal. A screen-reader must visit the content of the other view before the content of this one.</li>
<li><code>AccessibilityTraversalBefore</code>: sets the id of a view before which this one is visited in accessibility traversal. A screen-reader must visit the content of this view before the content of the one it precedes.</li>
</ul>
<p>Note: These attributes can be used directly in the xml but also in the code via the <code>setAccessibilityTraversalBefore</code> and <code>setAccessibilityTraversalAfter</code> methods. These methods are available for any element that inherits from <code>View</code>.</p>
<p><strong>Example: </strong> </p>
<pre><code>volupButton.setAccessibilityTraversalAfter(myView.findViewById(R.id.remote0).getId());
voldownButton.setAccessibilityTraversalAfter(myView.findViewById(R.id.volup).getId());
channelplusButton.setAccessibilityTraversalAfter(myView.findViewById(R.id.voldown).getId());
channelminusButton.setAccessibilityTraversalAfter(myView.findViewById(R.id.channelplus).getId());</code></pre>

<p><strong>Link: </strong>      </p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#setAccessibilityTraversalAfter%28int%29">setAccessibilityTraversalAfter</a></li>
<li><a href="https://developer.android.com/reference/android/view/View.html#setAccessibilityTraversalBefore%28int%29">setAccessibilityTraversalBefore</a></li>
</ul>
<h2 id="form">Form</h2>
<p><strong>Description: </strong>  </p>
<p>It is very important to bind the form fields with their labels. There are 2 major techniques to achieve this:</p>
<ul>
<li><code>LabelFor</code>: allow to specify a label to a view. This method takes the id of the view that it is associated. This method can be used any almost type of form field. We can also use xml <code>android:labelFor</code> or programmatically <code>setLabelFor</code>.</li>
<li><code>Hint</code>: add an example text when the text field is empty. This method only works for <code>TextView</code>. Supports setting the id to a string. Can be used in xml <code>android:hint</code> or programmatically &#39;setHint`.</li>
</ul>
<p><strong>Examples: </strong></p>
<p>LabelFor in XML: </p>
<pre><code>&lt;TextView
    [...]
  android:labelFor="@+id/imageView11"
  android:importantForAccessibility="no" /&gt;</code></pre>
    Note: It is very common, once the label is bound to its field, to hide the label from the accessibility service. This is because this one does not need to be vocalized by the Accessibility API anymore as its already associated with the form field (and will be vocalized by TalkBack for example).</br>
</br>
Hint in xml:
<pre><code>&lt;EditText
  [...]
   android:hint="@string/criteria_form_ex1_placeholder" /&gt;</code></pre>

<p><strong>Links: </strong></p>
<ul>
<li><a href="https://developer.android.com/reference/android/view/View.html#setLabelFor%28int%29">setLabelFor</a></li>
<li><a href="https://developer.android.com/reference/android/widget/TextView.html#setHint%28java.lang.CharSequence%29">setHint</a></li>
</ul>
<h2 id="text-size">Text size</h2>
<p><strong>Description: </strong>  </p>
<p>To enable the &quot;Huge font size&quot; option to properly interact with the application, several points are to be respected during the development:</p>
<ul>
<li>Use dynamic font size: the &quot;sp&quot;. This unit, specific to Android, allows to have a font size proportional to the pixel density of the display. It is highly recommended to use it for text, if only for a uniform design on all types of Android device.</li>
<li>Manage content overflows: A common mistake is to use a dynamic text size (&quot;sp&quot;) but not to pay attention to the container size. If the text gets bigger, the container must adapt so there is no overflow. One can perfectly play with the <code>min-height</code> and <code>height</code> attributes for correct result (the <code>height</code>set to <code>wrap_content</code> and <code>min-height</code> set to the default desired height).</li>
</ul>
<p><strong>Link: </strong></p>
<ul>
<li><a href="https://www.google.com/design/spec/style/typography.html#typography-styles">typography</a></li>
</ul>
<h2 id="accessibility-events-custom-views">Accessibility events &amp; custom views</h2>
<p><strong>Description: </strong> </p>
<p>On Android there are several events available for accessibility. You can manipulate them just like any event. They can enhance custom views that are not accessible enough. Using accessible events is not common on applications that are not intended to be used by disabled people, because other options are in most cases enough. Meanwhile, one must know they exist and they let you redefine the vocalization of a component.  </p>
<p>For more information, please refer to the following links:</p>
<p><strong>Example: </strong></p>
<p>In this example, the accessibility events are intercepted. Depending on their type (text has been changed in the view or the component has the TalkBack focus), we construct a vocalization to TalkBack.</p>
<pre><code>@Override
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) {

  boolean result = super.dispatchPopulateAccessibilityEvent(event);

  // Detect what type of accessibility event is being passed in.
  int eventType = event.getEventType();

  // Common case: The user has interacted with our view in some way. State may or may not have been changed. Read out the current status of the view.
  if (eventType == AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED) {
    event.getText().clear();
    event.getText().add("Possible reward: " + getBankValue() + ".");
    result = true;
  }

  // When a user first focuses on our view, we'll also read out some simple instructions to make it clear that this is an interactive element.
  if (eventType == AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUSED) {
    event.getText().add("Click here to play again.");
    result = true;
  }

  return result;
}</code></pre>

<p><strong>Links: </strong></p>
<ul>
<li><a href="http://developer.android.com/reference/android/view/accessibility/AccessibilityEvent.html">AccessibilityEvents</a></li>
<li><a href="http://developer.android.com/guide/topics/ui/accessibility/apps.html#custom-views">Creating a custom view</a></li>
</ul>
<h2 id="webview">WebView</h2>
<p><strong>Description: </strong> </p>
<p><code>WebView</code>s behave particularly on Android. First, if you want a page to be accessible, its HTML content must be accessible as well, it must follow the international standards: the WCAG2. To know the requirements and learn techniques for developing an accessible web, please visit the following section of our site: <a href="../web/index.html">accessibility recommendations for web</a>.</p>
<p>Second, on Android you must ensure that the WebView allows JavaScript <code>mWebView.getSettings.setJavaScriptEnabled(true);</code>
In these conditions, the page displayed through the <code>WebView</code> properly responds to the Accessibility API. </p>
<h2 id="list-vocalization">List vocalization</h2>
<p><strong>Description: </strong> </p>
<p>Sometimes the lists are not vocalized correctly: the speech synthesis is trying to vocalize the whole list at once (only the items displayed on the screen). This is especially the case when using the <code>RecyclerView</code>. To overcome this problem, there is a simple fix. Just set the <code>focusable</code> attribute to <code>true</code> for each item in the list. This has the effect of forcing the speech synthesis (TalkBack) to read the items one by one.</p>
<h2 id="navigating-via-the-focus-keyboard-">Navigating via the focus (keyboard)</h2>
<p><strong>Description: </strong></p>
<p>To handle focus navigation, make sure to:</p>
<ul>
<li>Allow interactive elements to receive the focus: focus navigation only concerns interactive elements. If, for example, your application has clickable custom views, it must be ensured that these views are focusable setting the <code>focusable</code> attribute to <code>true</code>.</li>
<li>Managing the focus display: interactive elements must have the <code>state_focused</code> defined and must be easily distinguishable when having the focus.</li>
<li>Managing the focus order: through the <code>nextFocusDown, nextFocusUp, nextFocusRight,nextFocusLeft</code> options, you can specify what view should take the focus when using the down, up, right and left arrow.</li>
</ul>
<p>Most of the time, only the two first points must be taken care of. Android is able to determine very precisely the positions of the elements between them and therefore to provide a logical and coherent reading order for the keyboard.</p>
<p>Note: <code>nextFocusDown, nextFocusUp, nextFocusRight, nextFocusLeft, focusable</code> and other focus management options are available either in the xml or programmatically.</p>
<p><strong>Example: </strong></p>
<p>Tabhost selector handling the <code>state_focused</code></p>
<pre><code>&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;!-- Non focused states --&gt;
    &lt;item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_tab_selector" /&gt;
    &lt;item android:state_focused="false" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected_tab_selector" /&gt;

    &lt;!-- Focused states --&gt;
    &lt;item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_focused_tab_selector" /&gt;
    &lt;item android:state_focused="true" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected_focused_tab_selector" /&gt;

    &lt;!-- Pressed --&gt;
    &lt;!-- Non focused states --&gt;
    &lt;item android:state_focused="false" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed_tab_selector" /&gt;
    &lt;item android:state_focused="false" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed_tab_selector" /&gt;

    &lt;!-- Focused states --&gt;
    &lt;item android:state_focused="true" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed_tab_selector" /&gt;
    &lt;item android:state_focused="true" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed_tab_selector" /&gt;
&lt;/selector&gt;</code></pre>

<p><strong>Link: </strong></p>
<ul>
<li><a href="http://developer.android.com/guide/topics/ui/accessibility/apps.html#focus-nav">Focus navigation</a><!--  This file is part of a11y-guidelines | Our vision of mobile & web accessibility guidelines and best practices, with valid/invalid examples.
Copyright (C) 2016  Orange SA
See the Creative Commons Legal Code Attribution-ShareAlike 3.0 Unported License for more details (LICENSE file). --></li>
</ul>


        </div>
      </div>
    </main>
    
    <a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button" title="Back to top of page" data-toggle="tooltip" data-placement="left">
        <span class="glyphicon glyphicon-chevron-up"></span>
    </a>
    
    <script src="../boosted/js/boosted.min.js"></script>
    <script type="text/javascript" src="./js/reco.js"></script> 
    <script type="text/javascript" src="./js/highlight.pack.js"></script>
    
    <script type="text/javascript" src="http://comfort.orange.com/serveur/crossdom/js/toolbar-min.js"> </script>
        
</body>
</html>
